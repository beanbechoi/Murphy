unit CMurphy;interface	uses		TCL, InfoIntf;implementation	procedure CMurphy.setLoc (locx, locy: integer);	begin		x := locx;		y := locy;	end;	procedure CMurphy.getLoc (var locx, locy: integer);	begin		locx := x;		locy := y;	end;	procedure CMurphy.setLastDir (newDir: integer);	begin		lastDir := newDir;	end;	procedure CMurphy.init;		var			at: point;	begin		lastMove := 0;		time := 0;		numBombs := 0;		lastDir := 2;		numInfos := CInfoApp(CInfoApp(gApplication)).getGPane.getBoard.infoCount;		at := CInfoApp(CInfoApp(gApplication)).getGPane.getBoard.MurphyStart;		x := at.h;		y := at.v;	end;	procedure CMurphy.killMurphy;	begin		CInfoApp(gapplication).GetGPane.EndLevel;		{safely end the level.}		PlaySound(sMurphyDied);	end;	procedure CMurphy.WonGame;	begin		CInfoApp(gapplication).GetGPane.EndLevel;		SetMusicTempo(300);		SoundStop;		PlayMusicNote(sOHit, 'c', 4, 255, quarter);		PauseChan(1);		PlayMusicNote(sOHit, 'g', 3, 255, eighth);		PauseChan(1);		PlayMusicNote(sOHit, 'a', 3, 255, quarter);		PauseChan(1);		PlayMusicNote(sOHit, 'g', 3, 255, eighth);		PauseChan(1);		PlayMusicNote(sOHit, 'e', 3, 255, quarter);		PauseChan(1);		PlayMusicNote(sOHit, 'c', 3, 255, half);		PauseChan(1);		PlayMusicNote(sOHit, 'c', 4, 255, half);		PauseChan(1);		CInfoApp(gapplication).TheyWonTheLevel;	end;	procedure CMurphy.gotInfotron;		var			infInt: CInfoIntPane;			dorky: rect;	begin		infInt := CInfoIntPane(CInfoApp(gapplication).GetGPane.itsSubviews.nthItem(4));		if numInfos = 1 then			begin				PlaySound(sGotLastInfo);				infInt.SetColor(myRedColor);			end		else			begin				PlaySound(sGotInfotron);				infInt.SetColor(myGreenColor);			end;		if numInfos > 0 then			numInfos := numInfos - 1		else			infInt.SetColor(myRedColor);		CInfoApp(gapplication).GetGPane.SetTheBoxes;	end;	function CMurphy.UseRedDisk: boolean;		{TRUE if I had one}		var			infInt: CInfoIntPane;			dorky: rect;	begin		UseRedDisk := FALSE;		if numBombs > 0 then			begin				useRedDisk := TRUE;				numBombs := numBombs - 1;				CInfoApp(gapplication).GetGPane.SetTheBoxes;				PlaySound(sGotRedDisk);			end;	end;	procedure CMurphy.gotRedDisk;		var			infInt: CInfoIntPane;			dorky: rect;	begin		infInt := CInfoIntPane(CInfoApp(gapplication).GetGPane.itsSubviews.nthItem(5));		numBombs := numBombs + 1;		if numBombs > 99 then			CInfoApp(gapplication).GetMurphyObj.Explode(x, y);		CInfoApp(gapplication).GetGPane.SetTheBoxes;		PlaySound(sGotRedDisk);	end;	function CMurphy.NumInfosLeft: integer;	begin		numInfosLeft := numInfos;	end;	function CMurphy.GetLastDir: integer;	begin		getLastDir := lastDir;	end;end.