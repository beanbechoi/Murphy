// Murphy's Revenge// (c)1997 Q Software / Dave Peck, All Rights Reserved// This source code is confidential and proprietary, and may not be reproduced// or utilized by anyone without the express written permission of Q Software.// File: MRQueue.c// Auth: Dave Peck// Date: 8/7/97// Desc: A simple queue implementation// ----------------------------------------------------------------// Includes// ----------------------------------------------------------------#include "MRQueue.h"#include "MRMemoryDebug.h"// ----------------------------------------------------------------// Constants// ----------------------------------------------------------------// ----------------------------------------------------------------// Data Structures// ----------------------------------------------------------------// ----------------------------------------------------------------// Global Data// ----------------------------------------------------------------// ----------------------------------------------------------------// Function Prototypes// ----------------------------------------------------------------// ----------------------------------------------------------------// Functions// ----------------------------------------------------------------MRQueue MakeQueue() {	MRQueue theQueue = (MRQueue) DBG_NewPtrClear( sizeof( struct MRQueueStruct ) );		theQueue->qEmpty = true;		return theQueue;}void KillQueue( MRQueue* theQueue ) {	DBG_DisposePtr( (Ptr) (*theQueue) );	*theQueue = NULL;}void Enq( MRQueue theQueue, void* theElement ) {	theQueue->qEmpty = false;	(theQueue->qSize) += 1;	theQueue->queue[(theQueue->qTail)++] = (long) theElement;	if ( theQueue->qTail >= MAX_QUEUE_SIZE )		theQueue->qTail = 0;}void* Deq( MRQueue theQueue ) {	long	toReturn;		if ( theQueue->qEmpty )		return NULL;		(theQueue->qSize) -= 1;		toReturn = theQueue->queue[(theQueue->qHead)++];		if ( theQueue->qHead >= MAX_QUEUE_SIZE )		theQueue->qHead = 0;		if ( theQueue->qSize == 0 )		theQueue->qEmpty = true;			return ((void*) toReturn);}